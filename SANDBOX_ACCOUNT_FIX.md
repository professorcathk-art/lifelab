# Sandbox 账号登录问题解决方案

## 问题
应用记住了真实的 Apple ID，无法输入 Sandbox 邮箱进行测试购买。

## 解决方案

### 方法 1: 在设备设置中退出 Apple ID（推荐）

1. **打开设置**
   - 进入 **设置** → **App Store**

2. **退出 Apple ID**
   - 点击您的 Apple ID
   - 选择 **退出登录**

3. **测试购买**
   - 打开应用
   - 尝试进行购买
   - 系统会提示登录
   - **使用 Sandbox 测试账号登录**（不是真实 Apple ID）

### 方法 2: 重置 Sandbox 环境

如果方法 1 不起作用，可以尝试重置 Sandbox 环境：

1. **删除并重新安装应用**
   - 长按应用图标
   - 选择 **删除 App**
   - 重新安装应用

2. **清除 StoreKit 缓存**
   - 删除应用后，StoreKit 的认证信息也会被清除
   - 重新安装后，系统会要求重新登录

### 方法 3: 使用不同的 Sandbox 测试账号

如果仍然无法登录 Sandbox 账号：

1. **创建新的 Sandbox 测试账号**
   - App Store Connect → 用户和访问 → 沙盒技术测试员
   - 创建新的测试账号（使用不同的邮箱）

2. **使用新账号测试**
   - 退出当前 Sandbox 账号
   - 使用新创建的 Sandbox 账号登录

### 方法 4: 检查设备时间设置

有时设备时间不正确会导致 Sandbox 认证失败：

1. **检查设备时间**
   - 设置 → 通用 → 日期与时间
   - 确保 **自动设置** 已开启
   - 或者手动设置为正确的时间

---

## 重要提醒

1. **Sandbox 测试账号与真实 Apple ID 不同**
   - Sandbox 账号仅用于测试
   - 邮箱不需要真实存在
   - 密码由您在 App Store Connect 中设置

2. **必须在真实设备上测试**
   - 模拟器无法测试 Sandbox 购买
   - 使用真实 iPhone 或 iPad

3. **退出真实 Apple ID 很重要**
   - 如果设备上登录了真实 Apple ID，系统可能会自动使用它
   - 必须先退出真实 Apple ID，才能使用 Sandbox 账号

---

## 验证 Sandbox 登录

购买时，系统会显示：
- **"Sandbox" 标识** - 说明使用的是 Sandbox 账号 ✅
- **没有 "Sandbox" 标识** - 说明使用的是真实 Apple ID ❌

如果看到 "Sandbox" 标识，说明已成功使用 Sandbox 账号！
